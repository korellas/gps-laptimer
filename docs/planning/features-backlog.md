# 기능 백로그

**최종 업데이트:** 2026-02-19

이 문서는 모든 기능 아이디어를 **구현 필요성** 기준으로 정리합니다.
각 아이디어는 로드맵의 Phase에 배치되어 있습니다.

**상태 범례:**
- 📋 **계획됨** - 로드맵 Phase에 배치됨
- ⏸️ **보류** - 현재 구현 필요성 낮음
- ❌ **거부됨** - 구현하지 않음

**구현 필요성 등급:**
- **필수** - 트랙에서 실제 사용하려면 반드시 필요
- **높음** - 사용성을 크게 향상시키는 기능
- **중간** - 있으면 좋지만, 없어도 핵심 기능에 영향 없음
- **낮음** - 장식적이거나 하드웨어 제약이 있는 기능

---

## Phase 2 기능 (다중 트랙 + 실전 대비)

### 트랙 정의 JSON + 빌트인 폴백
**상태:** 📋 계획됨 (Phase 2.1)
**필요성:** 필수
**작업량:** 중 (2주)

트랙을 바꿀 때마다 펌웨어를 수정할 수 없다. SD 카드에 JSON 파일로 트랙 추가/수정 가능해야 한다.

**요구사항:**
- SD 카드 JSON 트랙 파일 (`/sdcard/tracks/<id>.json`)
- 빌트인 트랙 (에버랜드, 인제) 펌웨어 디폴트로 유지
- SD JSON이 있으면 빌트인 오버라이드
- 트랙 중심 좌표 = 피니시라인 A/B 중앙 (자동 계산)
- `expectedLapTimeMs`, `detectionRadiusM` 제거 (dead code / proximity 폐지)

**참조:** [roadmap.md](roadmap.md) Phase 2.1, [specs/storage-settings-refactor.md](specs/storage-settings-refactor.md)

---

### 세션 상태머신 단순화 + 트랙 자동 식별
**상태:** 📋 계획됨 (Phase 2.2)
**필요성:** 필수
**작업량:** 중 (1주)

proximity detection (bbox + haversine)은 불필요한 오버헤드. 피니시라인 정방향 통과 자체가 트랙 검증이다.

**요구사항:**
- NEAR_TRACK 상태 제거 → `PRE_TRACK → SESSION_ACTIVE` 2단계
- PRE_TRACK에서 모든 트랙의 피니시라인을 직접 체크 (비용 0)
- 피니시라인 통과한 트랙으로 자동 식별
- proximity 관련 코드/상수 전면 제거
- 속도 조건(`SESSION_START_MIN_SPEED_KMH`) 유지

**참조:** [roadmap.md](roadmap.md) Phase 2.2, [specs/storage-settings-refactor.md](specs/storage-settings-refactor.md)

---

### 저장소/설정 리팩토링
**상태:** 📋 계획됨 (Phase 2.3)
**필요성:** 필수
**작업량:** 소 (1주)

설정이 여러 파일/포맷에 흩어져 있고, finish_line.bin은 dead path. 통합 필요.

**요구사항:**
- `/spiffs/config/finish_line.bin` 삭제
- `settings.json` 확장: `deltaRef` (오늘 베스트/세션 베스트), `customFinishLine`
- `/spiffs/config/imu_fusion.json` 변경 없음 (내부 전용)
- 수동 피니시라인 설정 시 settings.json에 저장 (바이너리 → JSON)

**참조:** [roadmap.md](roadmap.md) Phase 2.3, [specs/storage-settings-refactor.md](specs/storage-settings-refactor.md)

---

### 레퍼런스 랩 관리
**상태:** 📋 계획됨 (Phase 2.4)
**필요성:** 높음
**작업량:** 중 (1-2주)

트랙당 빠름/중간/느림 레퍼런스 랩 관리. 사용자 선택 가능.
델타 비교 기준: 오늘 베스트(기본) / 세션 베스트 — settings.json의 `deltaRef` 필드로 설정.

**참조:** [roadmap.md](roadmap.md) Phase 2.4

---

### 시작 화면
**상태:** 📋 계획됨 (Phase 2.4)
**필요성:** 필수
**작업량:** 소 (1-2일)

GPS fix 상태를 모르면 쓸모없는 데이터를 수집하게 된다. 트랙 현장에서 "준비됐다"는 확인이 반드시 필요.

**기능:**
- 로고/프로젝트명 + 버전 표시
- 초기화 진행률 (GPS fix, 디스플레이, 저장소)
- GPS fix 상태 표시 (핵심)
- 초기화 완료 시 자동 전환
- 초기화 실패 시 오류 표시

**참조:** [roadmap.md](roadmap.md) Phase 2.5

---

### 배터리 백분율 표시 + 사용률 추적
**상태:** 📋 계획됨 (Phase 2.5)
**필요성:** 필수
**작업량:** 소 (3-5일)

세션 중 배터리 소진 시 데이터 유실. 남은 배터리를 모르면 불안하게 주행해야 한다.

**하드웨어:**
- IO4 ADC + 1:3 수동 전압 분배기 (보드 내장)
- 배터리 4.2V → ADC 1.4V, 3.0V → ADC 1.0V (ESP32 ADC 범위 내)

**LiPo 방전 곡선 룩업 테이블 (1S 3.7V, 21개 엔트리):**

| 전압 (V) | ADC (V, ÷3) | SoC (%) | 구간 특성 |
|-----------|-------------|---------|-----------|
| 4.20 | 1.400 | 100 | 완충 |
| 4.15 | 1.383 | 95 | 급강하 구간 |
| 4.11 | 1.370 | 90 | |
| 4.08 | 1.360 | 85 | |
| 4.02 | 1.340 | 80 | |
| 3.98 | 1.327 | 75 | 평탄 구간 시작 |
| 3.95 | 1.317 | 70 | |
| 3.91 | 1.303 | 65 | |
| 3.87 | 1.290 | 60 | |
| 3.85 | 1.283 | 55 | |
| 3.84 | 1.280 | 50 | |
| 3.82 | 1.273 | 45 | |
| 3.80 | 1.267 | 40 | |
| 3.79 | 1.263 | 35 | |
| 3.77 | 1.257 | 30 | |
| 3.75 | 1.250 | 25 | 평탄 구간 끝 |
| 3.73 | 1.243 | 20 | 절벽 구간 시작 |
| 3.71 | 1.237 | 15 | |
| 3.69 | 1.230 | **10** | **← 자동 전원 OFF 임계값** |
| 3.61 | 1.203 | 5 | |
| 3.27 | 1.090 | 0 | 방전 종지 |

- 인접 엔트리 간 **선형 보간**으로 부드러운 퍼센트 계산
- 특성: 100→80% 급강하, 80→25% 평탄, 20% 이하 절벽

**기본 기능 (배터리 표시):**
- IO4 ADC에서 배터리 전압 읽기 (다중 샘플 평균으로 노이즈 제거)
- 룩업 테이블 + 선형 보간으로 퍼센트 변환
- UI 우측 상단에 아이콘 + 백분율
- 색상 코딩: 녹색(>60%), 노란색(20-60%), 빨간색(<20%)
- 10% 미만 시 깜빡임 경고

**사용률 추적 (Δ%/Δt 기반):**
- 1-2분 간격으로 SoC% 로깅 → NVS 링 버퍼 (최근 120개 = ~2시간)
- 방전율 계산: 최근 N개 측정값의 **Δ%/Δt** (분당 퍼센트 감소율)
- 남은 시간 추정: **(현재% - 10%) / 방전율** = 남은 분
  - 10%를 기준으로 계산 (0%가 아님)
  - 예: 현재 45%, 방전율 0.5%/분 → (45-10)/0.5 = 70분 남음

**자동 전원 OFF:**
- SoC ≤ 10% (≈3.69V) 도달 시 자동 전원 차단
- OFF 전 현재 세션 데이터 저장 (데이터 유실 방지)
- LCD에 "배터리 부족 - 전원 OFF" 경고 표시 후 3초 대기 → GPIO16 PWR OFF

**캡티브 포털 연동 (Phase 4.2 이후):**
- 웹 UI에서 방전 그래프 확인 가능

**참조:** [roadmap.md](roadmap.md) Phase 2.6

---

### GPS 테스트 페이지
**상태:** 📋 계획됨 (Phase 2.8)
**필요성:** 필수
**작업량:** 소 (2-3일)

GPS 하드웨어 연결 후 설정이 제대로 적용됐는지 현장에서 즉시 확인해야 한다. 시리얼 없이 LCD만으로 GPS 상태를 진단할 수 있어야 한다.

**표시 항목 (모두 실측값):**

| 항목 | 측정 방법 | 설명 |
|------|----------|------|
| 위성 수 | NAV-PVT offset 23 | 실제 사용 중 위성 수 |
| Fix 타입 | NAV-PVT offset 20 | No Fix / 2D / 3D / GNSS+DR |
| 현재 좌표 | NAV-PVT offset 24-31 | 위도/경도 (소수점 6자리) |
| 고도 | NAV-PVT offset 32-35 | hMSL (해발 고도, mm → m) |
| 속도 | NAV-PVT offset 56-63 | velN/velE → km/h |
| **실측 Hz** | 1초 윈도우 NAV-PVT 카운트 | 실제 수신 빈도 (목표: 10.0) |
| HDOP | NAV-PVT offset 76-77 | 수평 정확도 (pDOP × 0.01) |
| UTC 시간 | NAV-PVT offset 4-10 | GPS에서 오는 실제 시간 |
| **UART 상태** | 체크섬 성공/실패 카운트 | OK(정상) / ERR(보드레이트 불일치 등) |
| **메시지 건강도** | valid / total 비율 | 체크섬 통과율 (%) — 100%면 UART 정상 |

> **보드레이트는 직접 측정 불가.** ESP32는 자기가 설정한 값만 알고, GPS 실제 baud는 모름.
> 대신 체크섬 통과율로 간접 확인: 100%면 양쪽 baud 일치, 0%면 불일치.
> 실측 Hz가 10.0이면 네비 레이트 설정도 정상 적용된 것.

**진입 방법:**
- 터치 UI: 화면 터치/스와이프로 진입 (메인 → GPS 테스트 페이지 전환)
- 시리얼 명령 (`g` 또는 `t`)도 병행 지원

**화면 레이아웃 (640×172):**
```
┌────────────────────────────────────────────────────────────┐
│  GPS TEST                           SAT: 12  FIX: 3D      │
│  37.294831°N  127.202156°E          ALT: 52.3m             │
│  SPD: 0.0 km/h  HDG: 127.3°        HDOP: 1.2              │
│  RATE: 10.0 Hz  UART: OK 100%      UTC: 14:23:45          │
└────────────────────────────────────────────────────────────┘
```

**기술 세부사항:**
- 기존 `UBloxData` 구조체 확장 (고도, HDOP 추가)
- **실측 Hz**: 1초 슬라이딩 윈도우 내 유효 NAV-PVT 수신 횟수
- **UART 건강도**: 체크섬 통과 메시지 / 전체 수신 시도 (1초 윈도우)
- LVGL 라벨 위젯으로 텍스트 렌더링 (Share Tech Mono)
- 별도 화면 상태로 구현 (시뮬레이션/GPS/테스트)

**의존성:**
- UBX 초기화 구현 (보드레이트 변경, 네비 레이트 설정)

**참조:** [roadmap.md](roadmap.md) Phase 2.8

---

### GPS 구현 문서화
**상태:** 📋 계획됨 (Phase 2.7)
**필요성:** 높음
**작업량:** 소 (2-3일)

GPS 문제 발생 시 디버깅에 필수. 현장에서 트러블슈팅 참고자료.

**내용:**
- UBX 프로토콜 구현 가이드 (NAV-PVT 메시지, 체크섬)
- 초기화/설정 시퀀스
- 문제 해결 가이드 (fix 안잡힘, 좌표 오류 등)

**생성할 파일:**
- `docs/reference/gps-implementation.md`
- `docs/guides/gps-troubleshooting.md`

**참조:** [roadmap.md](roadmap.md) Phase 2.7

---

## Phase 3 기능 (UI/UX 향상)

### Speed Mode (가속 측정 모드) 🆕
**상태:** 📋 계획됨 (Phase 3.6)
**필요성:** 높음
**작업량:** 중 (2주)

랩타이머와 별도로, **직선 가속 성능을 GPS 기반으로 측정**하는 모드. 서킷이 아닌 일반 도로/활주로에서도 사용 가능하며, 차량 튜닝 전후 성능 비교에 유용하다.

**측정 모드:**
- **0→100 km/h**: 가장 기본적인 가속 측정
- **0→200 km/h**: 고성능 차량용
- **0→60 km/h**: 시내 주행 체감 가속력
- **100→200 km/h**: 롤링 가속 (고속 성능)
- **커스텀**: 사용자가 시작/종료 속도 직접 설정

**핵심 기능:**
- GPS 10Hz 보간으로 ±50ms 정확도의 시작/종료 시점 계산
- 중간 구간 자동 기록 (0→60, 0→80 등)
- 실시간 속도 프로그레스 바 + 경과 시간 표시
- 히스토리 관리 + 베스트 기록 추적
- HDOP < 2.0 조건에서만 측정 허용 (GPS 품질 보장)

**상태 머신:** `IDLE → READY → MEASURING → RESULT → IDLE`

**의존성:**
- GPS 하드웨어 모드 (Phase 0 ✅)
- 시작 화면 모드 선택 (Phase 2.4 ✅)
- 터치 UI (Phase 3.1) — 모드 선택, 설정 변경

**상세 설계:** [specs/speed-mode.md](specs/speed-mode.md)

---

### 터치 UI 설정 메뉴
**상태:** 📋 계획됨 (Phase 3.1)
**필요성:** 높음
**작업량:** 중 (2-3주)

트랙에서 시리얼 연결 불가. 터치로 모든 조작이 가능해야 한다.

**기능:**
- 트랙 선택 (검색 기능 포함 리스트)
- 레퍼런스 랩 선택
- 디스플레이 밝기 슬라이더
- GPS/시뮬레이션 모드 토글
- 통합 settings.json 영속성

**의존성:**
- 다중 트랙 지원 (Phase 2)
- 터치 드라이버 통합 (CST816S)

**참조:** [roadmap.md](roadmap.md) Phase 3.1

---

### 랩 히스토리 뷰어
**상태:** 📋 계획됨 (Phase 3.1)
**필요성:** 높음
**작업량:** 소 (1주)

세션 중간에 이전 랩을 확인하고 레퍼런스를 선택할 수 있어야 한다.

**기능:**
- 랩 리스트 스크롤 (스와이프)
- 랩 세부정보 보기 (탭)
- 레퍼런스로 랩 선택
- 오래된 랩 삭제
- 시간/날짜순 정렬

**참조:** [roadmap.md](roadmap.md) Phase 3.1

---

### 실시간 델타 그래프
**상태:** 📋 계획됨 (Phase 3.2)
**필요성:** 중간
**작업량:** 중 (1-2주)

시각적 피드백은 유용하지만, 주행 중 640×172 화면을 볼 여유가 제한적. "랩 완료 후 리뷰" 모드로 가치 극대화.

**기능:**
- 델타 vs 거리 선 그래프
- 색상 코딩 (녹색/빨간색)
- 스크롤 윈도우 (최근 30초 또는 전체 랩)
- LVGL 차트 위젯, 링 버퍼

**참조:** [roadmap.md](roadmap.md) Phase 3.2

---

### 랩 진행률 표시기
**상태:** 📋 계획됨 (Phase 3.2)
**필요성:** 중간
**작업량:** 소 (3-5일)

현재 랩에서 어디쯤 있는지 직관적으로 파악 가능.

**기능:**
- 레퍼런스 랩 대비 0-100% 진행률
- `trackDistanceM / totalLapDistance × 100`
- 선형 바 또는 숫자 표시
- 섹터 경계 마커 포함
- 색상 코딩 (빠른 섹터 녹색, 느린 섹터 빨간색)

**참조:** [roadmap.md](roadmap.md) Phase 3.2

---

### 선택 가능한 그래프/데이터 뷰
**상태:** 📋 계획됨 (Phase 3.2)
**필요성:** 중간
**작업량:** 중 (1-2주)

다양한 관점에서 주행 데이터를 분석할 수 있어야 한다.

**그래프 타입:**
1. 델타 vs 거리
2. 속도 vs 거리
3. 섹터 비교 (막대 차트)
4. 랩 히스토리 (최근 랩 리스트)

**기능:**
- 터치 스와이프/탭으로 뷰 전환
- 전체화면 그래프 모드 (토글)
- 마지막 선택 뷰 기본 설정 저장

**참조:** [roadmap.md](roadmap.md) Phase 3.2

---

### 그래프 엔벨로프/스무딩
**상태:** 📋 계획됨 (Phase 3.2)
**필요성:** 낮음
**작업량:** 소 (3-5일)

시각적 완성도 향상. 그래프 렌더링 인프라가 먼저 필요.

**기술:**
- 피크 홀드 + 지수 감쇠 (오디오 VU 미터 스타일)
- `peak(t) = max(current, peak(t-1) × decay_factor)`
- 반투명 오버레이 렌더링

**의존:** 그래프 인프라 (Phase 3.2)

**참조:** [roadmap.md](roadmap.md) Phase 3.2

---

### GPS 트랙 시각화
**상태:** 📋 계획됨 (Phase 3.3)
**필요성:** 중간
**작업량:** 중 (2주)

시각적으로 매력적이지만 640×172 화면 제약이 큼. 랩 완료 후 리뷰용으로 가치 있음.

**기능:**
- 2D 탑다운 트랙 뷰 (lat/lng → 화면 x/y 투영)
- 현재 위치 마커 + 레퍼런스 랩 경로
- 색상 코딩 (앞서면 녹색, 뒤지면 빨간색)
- 섹터 경계 표시
- 미니맵 모드 또는 전체화면 토글

**과제:**
- 가로로 긴 화면에 맞는 렌더링 최적화
- 실시간 렌더링 성능

**참조:** [roadmap.md](roadmap.md) Phase 3.3

---

### 테마
**상태:** 📋 계획됨 (Phase 3.4)
**필요성:** 낮음
**작업량:** 소 (3-5일)

라이트/다크 모드, 색상 구성표 선택. 기능적 가치보다 시각적 선호도.

**참조:** [roadmap.md](roadmap.md) Phase 3.4

---

## Phase 4 기능 (데이터 및 연결성)

### SD 카드 데이터 영속성
**상태:** ✅ 부분 구현 (Phase 4.1)
**필요성:** 높음

**구현 완료:**
- ✅ SD 카드 마운트 + `lap_storage.cpp`에서 SD/SPIFFS 분기
- ✅ `sd_logger.cpp`에서 GPS/세션 CSV 로깅

**잔여 작업:**
- 📋 settings.json SD 우선 저장 (SPIFFS 폴백)
- 📋 트랙 JSON SD 로더 → Phase 2.1로 앞당겨짐

**참조:** [roadmap.md](roadmap.md) Phase 4.1

---

### WiFi/블루투스 파일 접근
**상태:** 📋 계획됨 (Phase 4.2)
**필요성:** 높음
**작업량:** 중 (1-2주)

세션 후 데이터를 PC/모바일에서 분석하려면 내보내기가 필수.

**기능:**
- WiFi AP 또는 스테이션 모드
- 웹 기반 파일 브라우저
- CSV/GPX로 랩 다운로드
- SD 카드 파일시스템 탐색

**참조:** [roadmap.md](roadmap.md) Phase 4.2

---

### 트랙/설정 웹 인터페이스
**상태:** 📋 계획됨 (Phase 4.3)
**필요성:** 중간
**작업량:** 중 (2-3주)

새 트랙 추가 시 펌웨어 수정 없이 SD에 JSON 파일만 추가. 설정도 웹에서 통합 관리.

**기능:**
- ESP-IDF HTTP 서버 + 임베디드 프론트엔드
- 트랙 JSON 업로드/다운로드/편집
- 통합 설정 편집 (settings.json: 전화번호, 델타 기준 등)
- 변경사항 검증 및 미리보기

**의존:** WiFi (Phase 4.2) + 트랙 JSON 포맷 (Phase 2.1)

**참조:** [roadmap.md](roadmap.md) Phase 4.3

---

### OTA 펌웨어 업데이트 (캡티브 포털 + 웹 플래셔 + GitHub Actions)
**상태:** 📋 계획됨 (Phase 4.4)
**필요성:** 높음
**작업량:** 중 (2주)

두 가지 업데이트 경로를 지원하여 상황에 맞게 선택 가능하게 한다.

> **참고:** 배터리 장착 시 USB 포트에 전류 제한 문제가 있어 USB 연결이 불안정함. 캡티브 포털 OTA를 주력으로 사용.

**방법 1: 캡티브 포털 OTA (WiFi, 권장)**
- WiFi AP 모드 캡티브 포털에서 펌웨어 업로드 UI
- 파티션: factory + ota_0 + ota_1
- 버전 표시 (현재 버전 vs 업로드 파일 버전)
- 체크섬 검증 + 실패 시 롤백
- 업데이트 진행률 표시 (웹 UI + LCD)
- 장점: USB 케이블 불필요, 배터리 장착 상태에서도 안정적, 스마트폰만으로 업데이트

**방법 2: ESP Web Tools 웹 플래셔 (USB, 보조)**
- GitHub Pages에 정적 웹페이지 호스팅 (무료)
- `esp-web-tools` 웹 컴포넌트로 브라우저에서 직접 USB 플래시
- Web Serial API 사용 (Chrome/Edge 지원)
- ESP32-S3 칩 자동 감지 + manifest.json으로 버전 관리
- HTML 한 줄: `<esp-web-install-button manifest="manifest.json">`
- 장점: 구현 간단, ESP32 코드 변경 없음
- 제약: 배터리 장착 시 USB 전류 제한 문제로 불안정할 수 있음

**GitHub Actions CI/CD (공통):**
- 릴리즈 태그 푸시 시 자동 빌드 (`on: push: tags: 'v*'`)
- `espressif/esp-idf-ci-action`으로 ESP-IDF 빌드
- 빌드된 `.bin`을 GitHub Release에 자동 첨부
- GitHub Pages의 manifest.json 자동 업데이트
- 릴리즈별 바이너리 관리 (태그 = 버전)

**워크플로우:**
1. 코드 수정 → git tag `v0.4.0` → push
2. GitHub Actions가 자동 빌드 → Release에 `.bin` 첨부 + Pages manifest 업데이트
3a. **캡티브 포털 (주력):** GitHub Release에서 `.bin` 다운로드 → 디바이스 WiFi AP 접속 → 업로드 → OTA 완료
3b. **웹 플래셔 (보조):** 사용자가 GitHub Pages 접속 → USB 연결 → "Install" 클릭 → 완료

**참조:** [roadmap.md](roadmap.md) Phase 4.4
**참고:** [ESP Web Tools](https://esphome.github.io/esp-web-tools/), [espressif/esp-idf-ci-action](https://github.com/espressif/esp-idf-ci-action)

---

### User Track Creation (사용자 트랙 생성) 🆕
**상태:** 📋 계획됨 (Phase 4.7)
**필요성:** 높음
**작업량:** 대 (3-4주)

사용자가 **직접 트랙을 정의**하여, 내장 트랙에 없는 장소에서도 랩타임 측정 가능. Phase 2.1의 트랙 JSON 포맷과 동일한 형식으로 저장.

**트랙 타입:**
- **서킷 (Circuit):** 시작점 = 결승선, 순환 코스
- **원웨이 (One-Way):** 시작선 ≠ 끝선, 힐클라임/드래그/고갯길 구간 측정

**트랙 생성 방법 (3가지):**
1. **GPS 현장 캡처**: 디바이스에서 현재 위치로 시작/끝점 캡처, heading 자동 설정
2. **WiFi 웹 UI**: 브라우저에서 좌표 입력 또는 지도 클릭으로 설정
3. **JSON 파일 업로드**: SD에 직접 트랙 JSON 파일 추가

**저장:** `/sdcard/tracks/<user_track_id>.json` — 빌트인과 동일 파이프라인, 피니시라인 통과 기반 자동 식별에 자연스럽게 통합

**의존성:**
- 트랙 JSON 포맷 (Phase 2.1)
- WiFi 웹 서버 (Phase 4.2)
- 트랙 설정 웹 인터페이스 (Phase 4.3)

**상세 설계:** [specs/user-track-creation.md](specs/user-track-creation.md)

---

### 블루투스 데이터 스트리밍
**상태:** 📋 계획됨 (Phase 4.5, 선택사항)
**필요성:** 낮음
**작업량:** 중 (2주)

모바일 앱 개발도 필요하여 노력 대비 가치가 낮음. WiFi 웹 인터페이스가 대안.

**기능:**
- BLE GATT 서비스 (델타, 속도, 섹터, 랩 타임)
- 모바일 앱 (React Native 또는 Flutter)

**참조:** [roadmap.md](roadmap.md) Phase 4.5

---

### 클라우드 통합
**상태:** 📋 계획됨 (Phase 4.6, 선택사항)
**필요성:** 낮음
**작업량:** 대 (4주+)

서버 인프라 + 유지보수 비용. WiFi 내보내기로 대체 가능.

**참조:** [roadmap.md](roadmap.md) Phase 4.6

---

## Phase 5 기능 (고급)

### 세그먼트 분석
**상태:** 📋 계획됨 (Phase 5.1)
**필요성:** 중간
**작업량:** 대 (3주)

코너별 분석, 제동점 감지, 레이싱 라인 분석. 프로 수준 기능.

**참조:** [roadmap.md](roadmap.md) Phase 5.1

---

### 예측 랩 타임
**상태:** 📋 계획됨 (Phase 5.1)
**필요성:** 중간
**작업량:** 중 (1주)

현재 섹터 델타 기반 완주 시간 예측. GPS 데이터만으로 구현 가능.

**참조:** [roadmap.md](roadmap.md) Phase 5.1

---

### 오디오/음성 피드백
**상태:** 📋 계획됨 (Phase 5.2)
**필요성:** 중간 (하드웨어 의존)
**작업량:** 중 (2-3주)

주행 중 화면을 볼 수 없으므로 오디오 피드백은 이론적으로 매우 유용. 단, 보드에 스피커가 있는지가 결정적.

**단계:**
1. 하드웨어 조사 (회로도에서 스피커/앰프 핀 확인)
2. 기본 비프/톤 (랩 완료, 섹터 전환, 저배터리)
3. 음성 안내 확장 ("랩 완료, 1분 23초")

**참조:** [roadmap.md](roadmap.md) Phase 5.2

---

### 가속도계/텔레메트리
**상태:** 📋 계획됨 (Phase 5.3)
**필요성:** 낮음 (외부 하드웨어 필요)
**작업량:** 대 (3주)

프로 수준 분석이지만, 외부 모듈 + 장착 + 캘리브레이션 필요.

**기능:**
- 외부 가속도계 (MPU-6050 등)
- 측면/종방향 G 측정
- GPS와 센서 융합
- 코너링 속도/제동점 분석

**참조:** [roadmap.md](roadmap.md) Phase 5.3

---

### 비디오 동기화
**상태:** 📋 계획됨 (Phase 5.4)
**필요성:** 낮음 (추가 구현 최소)
**작업량:** 소 (타사 도구 활용)

ESP32에서 직접 비디오 처리 불가. CSV 내보내기(Phase 4)가 완료되면 RaceRender 같은 외부 도구로 자연스럽게 해결됨.

**참조:** [roadmap.md](roadmap.md) Phase 5.4

---

### 경쟁 기능 (다중 차량/레이스 모드)
**상태:** 📋 계획됨 (Phase 5.5)
**필요성:** 낮음
**작업량:** 대 (4주+)

다른 드라이버와 세션 후 비교, 레이스 워크플로우.

**참조:** [roadmap.md](roadmap.md) Phase 5.5

---

## ⏸️ 보류

구현 가치가 낮거나 인프라/센서가 없어서 보류된 아이디어:

### 피트 타이머
**필요성:** 없음
**보류 이유:** 트랙 데이 위주, 피트 스톱이 거의 없는 사용 시나리오

### 연료 소비 추적
**필요성:** 없음
**보류 이유:** 연료 센서 연결 불가. GPS 데이터로 추정 불가능.

### 타이어 마모 추정
**필요성:** 없음
**보류 이유:** 센서 없이 추측적. 랩 타임 열화로 추정하는 건 너무 부정확.

### 날씨 통합
**필요성:** 없음
**보류 이유:** WiFi + 외부 API 필요. 현장에서 날씨는 눈으로 보면 됨.

### 소셜 기능 (랩 공유)
**필요성:** 없음
**보류 이유:** 클라우드 백엔드 + 앱 개발 필요. 과도한 노력.

### 음성 명령
**필요성:** 없음
**보류 이유:** 레이싱 환경 소음에서 인식률 극히 낮음. DSP/클라우드 API 필요.

---

## ❌ 거부됨

### 실시간 다중 차량 GPS 추적
**거부 이유:** 여러 장치 + 서버 인프라 필요. 단일 기기로 불가능.
**대안:** 세션 후 CSV 비교

### AI 코칭
**거부 이유:** 대규모 ML 모델/데이터 필요. ESP32에서 실행 불가.
**대안:** 시각적 델타/섹터 분석 (이미 구현됨)

---

## 기능 요청 템플릿

새 기능 아이디어 추가 시:

```markdown
### 기능 이름
**상태:** 📋 계획됨 (Phase X.Y) / ⏸️ 보류
**필요성:** 필수/높음/중간/낮음
**작업량:** 소/중/대 (시간 추정)

기능에 대한 한 단락 설명. **왜 필요한지** 중심으로.

**기능:**
- 기능 1
- 기능 2

**기술 세부사항:**
- 구현 노트

**의존성:**
- Phase X 기능

**참조:** [roadmap.md](roadmap.md) Phase X.Y
```

---

## 참조

- **로드맵:** [roadmap.md](roadmap.md) (Phase별 배치 + 일정)
- **현재 상태:** [../development/status.md](../development/status.md)
- **아키텍처:** [../reference/architecture.md](../reference/architecture.md)

---

**최종 검토:** 2026-02-18
**다음 검토:** 월별
